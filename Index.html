import { useState } from "react"; import { Card, CardContent } from "@/components/ui/card"; import { Button } from "@/components/ui/button"; import { Input } from "@/components/ui/input";

export default function InstagramUnfollowerChecker() { const [oldFollowers, setOldFollowers] = useState([]); const [newFollowers, setNewFollowers] = useState([]); const [lostFollowers, setLostFollowers] = useState([]); const [gainedFollowers, setGainedFollowers] = useState([]);

const handleFileUpload = (e, setFollowers) => { const file = e.target.files[0]; if (!file) return;

const reader = new FileReader();
reader.onload = (event) => {
  const text = event.target.result;
  const usernames = text
    .split("\n")
    .map((line) => line.trim())
    .filter((line) => line !== "");
  setFollowers(usernames);
};
reader.readAsText(file);

};

const compareFollowers = () => { const oldSet = new Set(oldFollowers); const newSet = new Set(newFollowers);

const lost = [...oldSet].filter((user) => !newSet.has(user));
const gained = [...newSet].filter((user) => !oldSet.has(user));

setLostFollowers(lost);
setGainedFollowers(gained);

};

return ( <div className="max-w-2xl mx-auto p-6 space-y-6"> <h1 className="text-2xl font-bold">Instagram Unfollower Checker</h1>

<Card>
    <CardContent className="p-4 space-y-4">
      <div>
        <label className="block font-medium">Carica lista vecchia (.txt):</label>
        <Input type="file" accept=".txt" onChange={(e) => handleFileUpload(e, setOldFollowers)} />
      </div>
      <div>
        <label className="block font-medium">Carica lista nuova (.txt):</label>
        <Input type="file" accept=".txt" onChange={(e) => handleFileUpload(e, setNewFollowers)} />
      </div>
      <Button onClick={compareFollowers}>Confronta</Button>
    </CardContent>
  </Card>

  {lostFollowers.length > 0 && (
    <Card>
      <CardContent className="p-4">
        <h2 className="font-semibold text-lg mb-2">Follower persi:</h2>
        <ul className="list-disc list-inside">
          {lostFollowers.map((user, index) => (
            <li key={index}>{user}</li>
          ))}
        </ul>
      </CardContent>
    </Card>
  )}

  {gainedFollowers.length > 0 && (
    <Card>
      <CardContent className="p-4">
        <h2 className="font-semibold text-lg mb-2">Nuovi follower:</h2>
        <ul className="list-disc list-inside">
          {gainedFollowers.map((user, index) => (
            <li key={index}>{user}</li>
          ))}
        </ul>
      </CardContent>
    </Card>
  )}
</div>

); }

